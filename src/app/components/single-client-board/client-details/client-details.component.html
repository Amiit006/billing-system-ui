<!-- client-details.component.html -->
<div>
    <div class="card card-body bg-light mx-auto">
        <form [formGroup]="clientForm">
            <!-- Client Name -->
            <div class="required form-group mb-3">
                <label for="clientName" class="control-label font-weight-bold">Client Name:</label>
                <input type="text" class="form-control" id="clientName" formControlName="clientName" 
                       [ngClass]="{ 'is-invalid': clientForm.get('clientName').invalid && clientForm.get('clientName').errors 
                       && (clientForm.get('clientName').dirty || clientForm.get('clientName').touched) }">
                <div *ngIf="clientForm.get('clientName').invalid && clientForm.get('clientName').errors 
                        && (clientForm.get('clientName').dirty || clientForm.get('clientName').touched)" 
                     class="invalid-feedback">
                    <div *ngIf="clientForm.get('clientName').hasError('required')">
                        Client Name is required</div>
                </div>
            </div>

            <!-- Mobile and Email Row -->
            <div class="row mb-3">
                <div class="col-12 col-md-6">
                    <label for="mobile" class="control-label font-weight-bold">
                        Mobile: <span class="reqMark">*</span>
                    </label>
                    <input type="number" class="form-control" id="mobile" formControlName="mobile" 
                           [ngClass]="{ 'is-invalid': clientForm.get('mobile').invalid && clientForm.get('mobile').errors 
                           && (clientForm.get('mobile').dirty || clientForm.get('mobile').touched) }">
                    <div *ngIf="clientForm.get('mobile').invalid && clientForm.get('mobile').errors 
                            && (clientForm.get('mobile').dirty || clientForm.get('mobile').touched)" 
                         class="custom-invalid-feedback">
                        <div *ngIf="clientForm.get('mobile').hasError('required')">
                            Mobile is required</div>
                        <div *ngIf="clientForm.get('mobile').hasError('lengthError')">
                            Mobile No. length cant exceed 10</div>
                    </div>
                </div>
                <div class="col-12 col-md-6">
                    <label for="email" class="control-label font-weight-bold">Email:</label>
                    <input type="email" class="form-control" id="email" formControlName="email" 
                           [ngClass]="{ 'is-invalid': clientForm.get('email').invalid && clientForm.get('email').errors 
                           && (clientForm.get('email').dirty || clientForm.get('email').touched) }">
                    <div *ngIf="clientForm.get('email').invalid && clientForm.get('email').errors 
                            && (clientForm.get('email').dirty || clientForm.get('email').touched)" 
                         class="custom-invalid-feedback">
                        <div *ngIf="clientForm.get('email').hasError('email')">
                            Email not valid</div>
                    </div>
                </div>
            </div>

            <!-- GST Number -->
            <div class="form-group mb-3">
                <label for="gstNumber" class="control-label font-weight-bold">GST Number:</label>
                <input type="text" class="uppercase form-control" id="gstNumber" formControlName="gstNumber">
            </div>

            <!-- Address Section -->
            <div formGroupName="address">
                <h6 class="font-weight-bold text-primary mb-3">Address Details</h6>
                
                <!-- Store Name -->
                <div class="required form-group mb-3">
                    <label for="storeName" class="control-label font-weight-bold">Store Name:</label>
                    <input type="text" class="form-control" id="storeName" formControlName="storeName" 
                           [ngClass]="{ 'is-invalid': clientForm.get('address').get('storeName').invalid && clientForm.get('address').get('storeName').errors 
                           && (clientForm.get('address').get('storeName').dirty || clientForm.get('address').get('storeName').touched) }">
                    <div *ngIf="clientForm.get('address').get('storeName').invalid && clientForm.get('address').get('storeName').errors 
                            && (clientForm.get('address').get('storeName').dirty || clientForm.get('address').get('storeName').touched)" 
                         class="invalid-feedback">
                        <div *ngIf="clientForm.get('address').get('storeName').hasError('required')">
                            Store Name is required</div>
                    </div>
                </div>

                <!-- Address Line 1 -->
                <div class="required form-group mb-3">
                    <label for="addressLine1" class="control-label font-weight-bold">Address Line 1:</label>
                    <input type="text" class="form-control" id="addressLine1" formControlName="addressLine1" 
                           [ngClass]="{ 'is-invalid': clientForm.get('address').get('addressLine1').invalid && clientForm.get('address').get('addressLine1').errors 
                           && (clientForm.get('address').get('addressLine1').dirty || clientForm.get('address').get('addressLine1').touched) }">
                    <div *ngIf="clientForm.get('address').get('addressLine1').invalid && clientForm.get('address').get('addressLine1').errors 
                            && (clientForm.get('address').get('addressLine1').dirty || clientForm.get('address').get('addressLine1').touched)" 
                         class="invalid-feedback">
                        <div *ngIf="clientForm.get('address').get('addressLine1').hasError('required')">
                            Address Line 1 is required</div>
                    </div>
                </div>

                <!-- Address Line 2 -->
                <div class="required form-group mb-3">
                    <label for="addressLine2" class="control-label font-weight-bold">Address Line 2:</label>
                    <input type="text" class="form-control" id="addressLine2" formControlName="addressLine2" 
                           [ngClass]="{ 'is-invalid': clientForm.get('address').get('addressLine2').invalid && clientForm.get('address').get('addressLine2').errors 
                           && (clientForm.get('address').get('addressLine2').dirty || clientForm.get('address').get('addressLine2').touched) }">
                    <div *ngIf="clientForm.get('address').get('addressLine2').invalid && clientForm.get('address').get('addressLine2').errors 
                            && (clientForm.get('address').get('addressLine2').dirty || clientForm.get('address').get('addressLine2').touched)" 
                         class="invalid-feedback">
                        <div *ngIf="clientForm.get('address').get('addressLine2').hasError('required')">
                            Address Line 2 is required</div>
                    </div>
                </div>

                <!-- City and State Row -->
                <div class="row mb-3">
                    <div class="col-12 col-md-6">
                        <label for="city" class="control-label font-weight-bold required">City:</label>
                        <input type="text" class="form-control" id="city" formControlName="city" 
                               [ngClass]="{ 'is-invalid': clientForm.get('address').get('city').invalid && clientForm.get('address').get('city').errors 
                               && (clientForm.get('address').get('city').dirty || clientForm.get('address').get('city').touched) }">
                        <div *ngIf="clientForm.get('address').get('city').invalid && clientForm.get('address').get('city').errors 
                                && (clientForm.get('address').get('city').dirty || clientForm.get('address').get('city').touched)" 
                             class="custom-invalid-feedback">
                            <div *ngIf="clientForm.get('address').get('city').hasError('required')">
                                City is required</div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label for="state" class="control-label font-weight-bold required">State:</label>
                        <input type="text" class="form-control" id="state" formControlName="state" 
                               [ngClass]="{ 'is-invalid': clientForm.get('address').get('state').invalid && clientForm.get('address').get('state').errors 
                               && (clientForm.get('address').get('state').dirty || clientForm.get('address').get('state').touched) }">
                        <div *ngIf="clientForm.get('address').get('state').invalid && clientForm.get('address').get('state').errors 
                                && (clientForm.get('address').get('state').dirty || clientForm.get('address').get('state').touched)" 
                             class="custom-invalid-feedback">
                            <div *ngIf="clientForm.get('address').get('state').hasError('required')">
                                State is required</div>
                        </div>
                    </div>
                </div>

                <!-- Zip and Country Row -->
                <div class="row mb-3">
                    <div class="col-12 col-md-6">
                        <label for="zip" class="control-label font-weight-bold required">Zip:</label>
                        <input type="text" class="form-control" id="zip" formControlName="zip" 
                               [ngClass]="{ 'is-invalid': clientForm.get('address').get('zip').invalid && clientForm.get('address').get('zip').errors 
                               && (clientForm.get('address').get('zip').dirty || clientForm.get('address').get('zip').touched) }">
                        <div *ngIf="clientForm.get('address').get('zip').invalid && clientForm.get('address').get('zip').errors 
                                && (clientForm.get('address').get('zip').dirty || clientForm.get('address').get('zip').touched)" 
                             class="custom-invalid-feedback">
                            <div *ngIf="clientForm.get('address').get('zip').hasError('required')">
                                Zip is required</div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label for="country" class="control-label font-weight-bold">Country:</label>
                        <input type="text" class="form-control" id="country" formControlName="country">
                    </div>
                </div>
            </div>
        </form>
        
        <!-- Action Buttons -->
        <div class="text-center mt-4">
            <button class="btn btn-primary me-2 mb-2" *ngIf="!editInProgress" (click)="onEditClick()" 
                    mat-flat-button color="primary">Edit</button>
            <button class="btn btn-primary me-2 mb-2" *ngIf="editInProgress" (click)="onSaveClick()" 
                    [disabled]="clientForm.invalid || disableSaveButton" mat-flat-button color="primary">Save</button>
            <button class="btn btn-warning mb-2" *ngIf="editInProgress" (click)="onCanclelClick()" 
                    mat-flat-button color="warn">Cancel</button>
        </div>
    </div>
</div>
<app-progress-spinner [mode]="mode" [backdropEnabled]="true" [positionGloballyCenter]="true" 
                     [displayProgressSpinner]="displayProgressSpinner">
</app-progress-spinner>